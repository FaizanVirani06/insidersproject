# ----------------------------------------
# Insider Platform - environment variables
# Copy this file to .env and fill in values.
# ----------------------------------------

# -----------------
# Production domain (used by Caddy in docker-compose.prod.yml)
# -----------------
DOMAIN=example.com
CADDY_EMAIL=you@example.com

# -----------------
# Postgres (docker-compose.prod.yml uses POSTGRES_PASSWORD)
# -----------------
POSTGRES_PASSWORD=postgres

# Optional: override DB DSN if not using docker-compose
# INSIDER_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/insider_platform

# -----------------
# SEC / EDGAR (REQUIRED - SEC asks for a descriptive user-agent)
# -----------------
SEC_USER_AGENT=InsiderPlatform/0.1 (contact: you@example.com)

# Polite throttling (seconds between SEC requests per worker)
SEC_MIN_INTERVAL_SECONDS=0.12

# Enable the "current Form 4" poller (optional)
ENABLE_FORM4_POLLER=0
FORM4_POLLER_INTERVAL_SECONDS=120

# -----------------
# Market data (EODHD)
# -----------------
EODHD_API_KEY=
EODHD_BASE_URL=https://eodhd.com/api

# Cache staleness
MARKET_CAP_MAX_AGE_DAYS=7
NEWS_MAX_AGE_HOURS=12

# -----------------
# AI (Gemini)
# -----------------
GEMINI_API_KEY=
GEMINI_MODEL=gemini-2.5-flash-lite
GEMINI_BASE_URL=https://generativelanguage.googleapis.com/v1beta
AI_TEMPERATURE=0.2
AI_MAX_TOKENS=2048

# -----------------
# Benchmark for excess-return stats
# -----------------
BENCHMARK_SYMBOL=SPY.US

# -----------------
# Auth / cookies
# -----------------
# IMPORTANT: set a strong secret in production.
AUTH_JWT_SECRET=dev_change_me
AUTH_TOKEN_EXPIRE_MINUTES=10080

# Bootstrap the first admin user on a fresh DB (optional)
AUTH_BOOTSTRAP_ADMIN_USERNAME=admin
AUTH_BOOTSTRAP_ADMIN_PASSWORD=admin

# Cookie settings (recommended for the Vite/React frontend)
AUTH_COOKIE_NAME=ip_token
AUTH_COOKIE_DOMAIN=
AUTH_COOKIE_PATH=/
AUTH_COOKIE_SAMESITE=lax

# Public URL used to infer secure cookies
PUBLIC_APP_URL=http://localhost:5173
# Force secure cookies explicitly (0/1). If unset, inferred from PUBLIC_APP_URL https.
# AUTH_COOKIE_SECURE=1

# -----------------
# CORS (dev only; prod is same-origin behind Caddy)
# -----------------
CORS_ALLOW_ORIGINS=http://localhost:5173,http://127.0.0.1:5173,http://localhost:3000

# -----------------
# Stripe billing (optional)
# -----------------
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_PRICE_ID_MONTHLY=
STRIPE_PRICE_ID_YEARLY=

# Treat users as paid in development (0/1)
BILLING_DEV_BYPASS=1

# -----------------
# Advanced / versioning (normally leave defaults)
# -----------------
# CURRENT_PARSE_VERSION=form4_parse_v1.1
# CURRENT_CLUSTER_VERSION=cluster_v1
# CURRENT_TREND_VERSION=trend_v1
# CURRENT_OUTCOMES_VERSION=outcomes_v2
# CURRENT_STATS_VERSION=stats_v2
# PROMPT_VERSION=prompt_ai_v3
